# ZK Backup Server — Environment variables
# Copy to .env and edit before running.

# ── Domain / IP (used by Caddy for HTTPS) ──────────────────────
#
# Option A — You have a domain name (recommended):
#   1. Set DOMAIN to your domain
#   2. Copy Caddyfile.domain → Caddyfile  (uses real Let's Encrypt certs)
#   3. Point DNS A record to your server IP
#
# Option B — You only have an IP address:
#   1. Set DOMAIN to your server's public IP  (e.g. 203.0.113.42)
#   2. Keep the default Caddyfile  (uses self-signed cert via "tls internal")
#   3. In the Android app, enable "Self-hosted server" toggle
#
# Option C — Local dev:
#   1. Set DOMAIN=localhost
#
DOMAIN=203.0.113.42

# ── Ports (change if 80/443 are already used) ─────────────────
# These are the ports exposed on the HOST. Caddy always listens on
# 80/443 inside the container — Docker maps these for you.
# If you share your public IP with other servers, pick unused ports
# and forward them on your router.
HTTPS_PORT=8443
HTTP_PORT=8080

# ── Postgres ───────────────────────────────────────────────────
# Inside Docker network, the DB hostname is "db" on port 5432.
POSTGRES_USER=zkbackup
POSTGRES_PASSWORD=CHANGE-ME-strong-random-password
POSTGRES_DB=zkbackup
DATABASE_URL=postgresql+asyncpg://zkbackup:CHANGE-ME-strong-random-password@db:5432/zkbackup

# ── JWT ────────────────────────────────────────────────────────
# CHANGE THIS to a random 64+ char string!  e.g.: openssl rand -hex 32
JWT_SECRET=replace-me-with-a-long-random-secret-string

# ── Storage ────────────────────────────────────────────────────
# "local" (default) or "s3"
STORAGE_BACKEND=local
STORAGE_PATH=/data/storage

# S3-compatible settings (only if STORAGE_BACKEND=s3)
# S3_ENDPOINT=https://s3.example.com
# S3_ACCESS_KEY=your-access-key
# S3_SECRET_KEY=your-secret-key
# S3_BUCKET=zkbackup
# S3_REGION=us-east-1

# ── CORS ───────────────────────────────────────────────────────
# For domain:  https://backup.example.com
# For IP:      https://203.0.113.42
# For local dev: *
ALLOWED_ORIGINS=*
